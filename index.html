<!DOCTYPE html>
<html ng-app="gallifreyo" ng-controller="HostController as host">
<head>
	<meta charset="UTF-8">
	<meta name=viewport content="width=device-width, initial-scale=1">
	<title>Gallifreyo</title>
	
	<link href="https://fonts.googleapis.com/css?family=Raleway:800" rel="stylesheet">
	<script type="text/javascript" src="src/jquery-2.1.1.min.js"></script>
	<script src="src/materialize.min.js"></script>
	<script src="src/angular.min.js"></script>
	<!-- REPLACE WITH CDN AFTER -->
	
	<link rel="stylesheet" href="css/materialize_mod.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<script src="js/app.js"></script>
	
	<script src="js/colpick.js" type="text/javascript"></script>
  <link rel="stylesheet" href="css/colpick.css" type="text/css"/>
	
	<script type="text/javascript">
	  $(document).ready(function() {
      $('select').material_select();
      $('.collapsible').collapsible({
        onOpen: function(el){console.log(el);el.context.childNodes[2].childNodes[0].textContent = "expand_less"},
        onClose: function(el){el.context.childNodes[2].childNodes[0].textContent = "expand_more"},
      });
      
$('#colorpicker').colpick();
    });
    Number.prototype.toDeg = function(){
      return (this.valueOf() / Math.PI) * 180;
    };
  </script>
  <script type="text/ng-template" id="display-svg">
  <div id="drawing">
    <svg id="render" xmlns="http://www.w3.org/2000/svg" height="100%" width="100%" preserveAspectRatio="none">
      <g stroke-width="1" fill="none" stroke="black" transform="scale(1,-1)"> <!-- this flips it so it's not the wrong way round -->
        <g level="paragraph">
          <g level="sentence" ng-repeat="sentence in host.paragraph.sentences">
            <circle cx="0" cy="0" r="15"/>
            <g level="word" ng-repeat="word in sentence.words">
              <g level="letter" ng-attr-transform="{{word.transform}}" ng-repeat="letter in word.letters">
                <path ng-attr-d="{{letter.d}}" ng-attr-transform="{{letter.transform}}"></path>
              </g>
            </g>
          </g>
        </g>
      </g>
    </svg>
  </div>
  </script>
  <script type="text/ng-template" id="downloads">
  <div class="card white">
    <div class="card-content black-text">
      <span class="card-title">Download</span>
      <div class="section">
        <div class="center-align">
          <a class="waves-effect waves-light btn section">SVG</a>
          <a class="waves-effect waves-light btn">PNG</a>
          <a class="waves-effect waves-light btn" ng-click="host.download('JSON')">JSON</a>
        </div>
      </div>
    </div>
  </div>
  </script>
</head>
  <body class="grey lighten-2">
    <div class="container">
      <div class="row" style="margin-bottom: 0;">
      
        <div class="col P12 L6"> <!-- this is the scrolly column on the left -->
        
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" style="width: 100%; margin: auto" viewBox="0 -13.859375 71.171875 17.515625">
            <text style="font-family: Raleway, Roboto, sans-serif; font-weight:800;">
              Gallifreyo
            </text>
          </svg>
        </div>
        
          <!-- START INPUT CARD -->
          <div class="card white">
            <div class="card-content black-text">
              <span class="card-title">Text to translate</span>
              <p>Use the spacebar to separate words. Use a full-stop to separate sentences.</p>
              <div class="row input-field">
                <input class="row col l8 push-l2 s10 push-s1" ng-model="host.text" ng-change="host.change()">
                <a class="waves-effect waves-light btn row col l6 push-l3 s10 push-s1 center-align" ng-click="host.generate()">{{host.instant ? "Retransliterate" : "Transliterate"}}</a>
              </div>
            </div>
          </div>
          <!-- END INPUT CARD -->
          
          <display-svg class="hide-on-landscape"></display-svg>
          <downloads class="hide-on-landscape"></downloads>
          
          <!-- START OPTIONS CARD -->
          <div class="card white">
            <div class="card-content black-text">
              <span class="card-title">Options</span>
              <div class="section" id="basic" style="padding-bottom: 0;">
                <div class="row section" style="margin-bottom: 0; padding-bottom: 0;">
                  <div class="col s9">
                    Instant translation while you type
                  </div>
                  <div class="col s3 switch right-align">
                    <label>
                      <input type="checkbox" ng-model="host.instant" ng-change="host.instant ? host.generate() : null">
                      <span class="lever"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <ul class="collapsible" data-collapsible="expandable" style="box-shadow: none; border-right: none; border-left: none;">
              <li>
                <div class="collapsible-header"><i class="material-icons">edit</i>Drawing<i class="material-icons right">expand_more</i></div>
                <div class="collapsible-body">
                  <div class="row valign-wrapper">
                    <div class="col s4">
                      Language
                    </div>
                    <div class="col s8 input-field right-align">
                      <select ng-model="host.lang" ng-options="lang for lang in host.langs" ng-change="host.instant ? host.generate() : null"></select>
                    </div>
                  </div>
                  <div class="row valign-wrapper">
                    <div class="col s6">
                      Sentence structure
                    </div>
                    <div class="col s6 input-field right-align">
                      <select ng-model="host.structure.sentence" ng-options="structure for structure in host.structures" ng-change="host.instant ? host.generate() : null"></select>
                    </div>
                  </div>
                  <div class="row valign-wrapper">
                    <div class="col s6">
                      Paragraph structure
                    </div>
                    <div class="col s6 input-field right-align">
                      <select ng-model="host.structure.sentence" ng-options="structure for structure in host.structures" ng-change="host.instant ? host.generate() : null"></select>
                    </div>
                  </div>
                </div>
              </li>
              <li>
                <div class="collapsible-header"><i class="material-icons">image</i>Output<i class="material-icons right">expand_more</i></div>
                <div class="collapsible-body">
                  <div class="row valign-wrapper">
                    <div class="col s6">
                      Width of image (px)
                    </div>
                    <div class="col s6 input-field right-align">
                      <input class="center-align" type="number" ng-model="host.width" ng-change="host.instant ? host.generate() : null">
                    </div>
                  </div>
                  <div class="row section">
                    <div class="col s9">
                      Watermark
                    </div>
                    <div class="col s3 switch right-align">
                      <label>
                        <input type="checkbox" ng-model="host.watermark" ng-change="host.instant ? host.generate() : null">
                        <span class="lever"></span>
                      </label>
                    </div>
                  </div>
                  <div class="row  valign-wrapper">
                    <div class="col s7 m9">
                      Foreground colour (leave blank for transparent)
                    </div>
                    <div class="col s5 m3 input-field right-align">
                      <input class="center-align" type="text" ng-model="host.fore" ng-change="host.instant ? host.generate() : null">
                    </div>
                  </div>
                  <div class="row  valign-wrapper">
                    <div class="col s7 m9">
                      Background colour (leave blank for transparent)
                    </div>
                    <div class="col s5 m3 input-field right-align">
                      <input class="center-align" type="text" ng-model="host.back" ng-change="host.instant ? host.generate() : null">
                    </div>
                  </div>
                </div>
              </li>
              <li>
                <div class="collapsible-header"><i class="material-icons">data_usage</i>Angle sizes<i class="material-icons right">expand_more</i></div>
                <div class="collapsible-body">
                  <div class="row">
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="1angle" step="0.1" ng-model="host.settings.s.a" ng-change="host.instant ? host.generate() : null">
                    <label for="1angle">{{host.debug ? "s-block" : "Group 1"}}</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="2angle" step="0.1" ng-model="host.settings.p.a" ng-change="host.instant ? host.generate() : null">
                    <label for="2angle">{{host.debug ? "p-block" : "Group 2"}}</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="3angle" step="0.1" ng-model="host.settings.d.a" ng-change="host.instant ? host.generate() : null">
                    <label for="3angle">{{host.debug ? "d-block" : "Group 3"}}</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="4angle" step="0.1" ng-model="host.settings.f.a" ng-change="host.instant ? host.generate() : null">
                    <label for="4angle">{{host.debug ? "f-block" : "Group 4"}}</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="4angle" step="0.1" ng-model="host.settings.f.a" ng-change="host.instant ? host.generate() : null">
                    <label for="4angle">{{host.debug ? "v-block" : "Vowels"}}</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="5angle" step="0.1" ng-model="host.settings.buffer.letter" ng-change="host.instant ? host.generate() : null">
                    <label for="5angle">Letter buffer</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="6angle" step="0.1" ng-model="host.settings.buffer.word" ng-change="host.instant ? host.generate() : null">
                    <label for="6angle">Word buffer</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="7angle" step="0.1" ng-model="host.settings.buffer.sentence" ng-change="host.instant ? host.generate() : null">
                    <label for="7angle">Sentence buffer</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="8angle" step="0.1" ng-model="host.settings.buffer.sentence" ng-change="host.instant ? host.generate() : null">
                    <label for="8angle">Sentence buffer</label>
                  </div>
                  </div>
                </div>
              </li>
              <li>
                <div class="collapsible-header"><i class="material-icons">code</i>Debug tools<i class="material-icons right">expand_more</i></div>
                <div class="collapsible-body">
                <div class="row section">
                  <div class="col s9">
                    Enable debug mode
                  </div>
                  <div class="col s3 switch right-align">
                    <label>
                      <input type="checkbox" ng-model="host.debug" ng-change="host.instant ? host.generate() : null">
                      <span class="lever"></span>
                    </label>
                  </div>
                </div>
                <div class="row">
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="1block" step="0.1" ng-model="host.settings.s.b" ng-change="host.instant ? host.generate() : null">
                    <label for="1block">Value of b for s-block (moonrise)</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="2block" step="0.1" ng-model="host.settings.p.b" ng-change="host.instant ? host.generate() : null">
                    <label for="2block">Value of b for p-block (noon)</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="3block" step="0.1" ng-model="host.settings.d.b" ng-change="host.instant ? host.generate() : null">
                    <label for="3block">Value of b for d-block (dawn)</label>
                  </div>
                  <div class="col s6 input-field">
                    <input class="center-align" type="number" id="4block" step="0.1" ng-model="host.settings.f.b" ng-change="host.instant ? host.generate() : null">
                    <label for="4block">Value of b for f-block (twilight)</label>
                  </div>
                </div>
                </div>
              </li>
            </ul>
          </div>
          <!-- END OPTIONS CARD -->
          
          <!-- START donate nagger -->
          <div class="col l10 push-l1 s12">
            <div class="card white">
              <div class="card-content black-text">
                <div class="section">
                  <p>Gallifreyo, a modern Gallifreyan translator</p>
                  <p>For help, instruction and feedback, head to <a href="https://github.com/rossjrw/gallifreyo">the GitHub page</a>
                </div>
              </div>
            </div>
          </div>
          <!-- END donate nagger -->
          
        </div>
        
        <div class="col P12 L6 hide-on-portrait valign-wrapper" style="height: 100vh;">
        <div class="targset" style="width: 35%; position: fixed;">
          <!-- START IMAGE CARD -->
          <display-svg class="hide-on-portrait"></display-svg>
          <!-- END IMAGE CARD -->
          
          <!-- START DOWNLOAD CARD -->
          <downloads class="hide-on-portrait"></downloads>
          <!-- END DOWNLOAD CARD -->
        </div>
        </div>
      </div>
    </div>
  </body>
</html>
